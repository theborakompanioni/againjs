/*! { "name": "againjs", "version": "0.1.0", "homepage": "https://github.com/theborakompanioni/againjs","copyright": "(c) 2015 theborakompanioni" } */
!function(a,b){"use strict";a.Again=b()}(this,function(a){"use strict";function b(){return(new Date).getTime()}function c(a){clearInterval(a.intervalId),clearTimeout(a.delay),delete a.intervalId,delete a.delay}function d(a,c,d,e){var f=function(){a.last[d]=b(),a.callback()};if(e){var g=b()-a.last[d];if(c>g){var h=c-g;a.delay=setTimeout(function(){f(),a.intervalId=setInterval(f,c)},h)}else setTimeout(function(){f()},0),a.intervalId=setInterval(f,c)}else a.intervalId=setInterval(f,c)}function e(a){return this instanceof e?(this._state=null,this._timers=[],this._config=a||{},void(this._config.reinitializeOn=this._config.reinitializeOn||{})):new e(a)}return e.prototype.state=function(){return this._state},e.prototype.update=function(a){this._state=a,this._cancelAndReinitialize()},e.prototype.every=function(b,d,e){var f=d;parseFloat(d)===d&&(f={"*":parseFloat(d)});var g={name:(Math.random()+1).toString(36).substring(3,9),callback:b,intervals:f,delay:a,intervalId:a,last:{}};this._timers.push(g),this._run(g,!!e);var h=this;return function(){var a=h._timers.indexOf(g);return a>-1?(c(h._timers[a]),h._timers.splice(a,1),!0):!1}},e.prototype.cancelAll=function(){for(var a=0,b=this._timers.length;b>a;a++)c(this._timers[a]);return!0},e.prototype.unregisterAll=function(){return this.cancelAll(),this._timers=[],!0},e.prototype._run=function(a,b){var c=+a.intervals[this._state]||+a.intervals["*"];c>0&&d(a,c,this._state,!!b)},e.prototype._cancelAndReinitialize=function(){for(var a=!!this._config.reinitializeOn[this._state],b=0,d=this._timers.length;d>b;b++){var e=this._timers[b];c(e),this._run(e,a)}},e.create=e,e});