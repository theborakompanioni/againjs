/*! { "name": "againjs", "version": "0.0.11", "homepage": "https://github.com/theborakompanioni/againjs","copyright": "(c) 2015 theborakompanioni" } */
!function(a,b){"use strict";a.Again=b()}(this,function(){"use strict";function a(){return(new Date).getTime()}function b(a){clearInterval(a.id),clearTimeout(a.delay),delete a.id,delete a.delay}function c(b,c,d,e){var f=function(){b.last[d]=a(),b.callback()};if(b.last=b.last||{},e){var g=a()-b.last[d];c>g?b.delay=setTimeout(function(){f(),b.id=setInterval(f,c)},c-g):(setTimeout(function(){f()},0),b.id=setInterval(f,c))}else b.id=setInterval(f,c)}function d(a){return this instanceof d?(this._state=null,this._timers=[],this._config=a||{},void(this._config.reinitializeOn=this._config.reinitializeOn||{})):new d(a)}return d.prototype.state=function(){return this._state},d.prototype.update=function(a){this._state=a,this._cancelAndReinitialize()},d.prototype.every=function(a,c,d){var e=c;parseFloat(c)===c&&(e={"*":parseFloat(c)});var f={callback:a,intervals:e};this._timers.push(f),this._run(f,!!d);var g=this;return function(){var a=g._timers.indexOf(f);return a>-1?(b(g._timers[a]),g._timers.splice(a,1),!0):!1}},d.prototype.cancelAll=function(){for(var a=0,c=this._timers.length;c>a;a++)b(this._timers[a]);return!0},d.prototype.unregisterAll=function(){return this.cancelAll(),this._timers=[],!0},d.prototype._run=function(a,b){var d=+a.intervals[this._state]||+a.intervals["*"];d>0&&c(a,d,this._state,!!b)},d.prototype._cancelAndReinitialize=function(){for(var a=!!this._config.reinitializeOn[this._state],c=0,d=this._timers.length;d>c;c++){var e=this._timers[c];b(e),this._run(e,a)}},d.create=d,d});